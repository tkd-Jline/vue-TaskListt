"use strict";var STORAGE_KEY="task-list-vue",taskStorage={fetch:function(){var t=JSON.parse(localStorage.getItem(STORAGE_KEY)||"[]");return t.forEach(function(t,e){return t.id=e}),taskStorage.uid=t.length,t},save:function(t){localStorage.setItem(STORAGE_KEY,JSON.stringify(t))}},filters={all:function(t){return t},active:function(t){return t.filter(function(t){return!t.completed})},completed:function(t){return t.filter(function(t){return t.completed})}};function onHashChange(){var t=window.location.hash.replace(/#\/?/,"");filters[t]&&(taskApp.visibility=t)}var taskApp=new Vue({el:"#app",data:{tasks:taskStorage.fetch(),newTask:"",visibility:"all",editedTask:null,beforeEditCache:"",nothingTitle:"I have nothing to do.."},computed:{filterTasks:function(){return filters[this.visibility](this.tasks)},remaining:function(){return filters.active(this.tasks).length},allDone:{get:function(){return 0===this.remaining},set:function(e){this.tasks.forEach(function(t){return t.completed=e})}}},methods:{addTask:function(){var t=this.newTask&&this.newTask.trim();t&&(this.tasks.push({id:taskStorage.uid++,title:t,completed:!1}),taskStorage.save(this.tasks),this.newTask="",this.visibility="all",window.location.hash="#/all")},removeTask:function(t){console.log(t),this.tasks.splice(this.tasks.indexOf(t),1),taskStorage.save(this.tasks)},removeCompleted:function(){this.tasks=filters.active(this.tasks)},editTask:function(t){this.editedTask=t,this.beforeEditCache=t.title},doneEdit:function(t){var e;this.editedTask&&(this.editedTask=null,(e=t.title&&t.title.trim())&&(t.title=e))},canselEdit:function(t){this.editedTask=null,t.title=this.beforeEditCache}},watch:{tasks:{handler:function(t){taskStorage.save(t)},deep:!0}},filters:{pluralize:function(t){return t<=1?"item":"items"}},directives:{"todo-focus":function(t,e){e.value&&t.focus()}}});window.addEventListener("hashchange",onHashChange),onHashChange();